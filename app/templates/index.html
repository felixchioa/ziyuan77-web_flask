<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content="èµ„æº77ä¸»é¡µï¼ŒåŒ…æ‹¬é¡¹ç›®ã€æ—¥å¸¸ã€å·¥å…·ã€èµ„æºç«™ã€åšå®¢ã€äº”å­æ£‹ã€å¸¸ç”¨æ§åˆ¶å°å‘½ä»¤åŠå…¶å‚æ•°ã€ç½‘ç«™æ›´æ–°ã€ç½‘ç«™æºç ç­‰ï¼Œæ–¹ä¾¿å¿«æ·ã€‚">
        <title>77èµ„æºç«™ï¼Œæä¾›å„ç§æœ‰ç”¨çš„å·¥å…·å’Œèµ„æº</title>
        <link rel="stylesheet" href="/static/css/index.css" />
        <style>
        .network-info {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .network-info-header {
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 5px;
        }

        .network-info-header:hover {
            background-color: #f0f0f0;
        }

        .network-info-content {
            display: none;
        }

        .network-info-content.show {
            display: block;
        }

        .toggle-icon {
            margin-right: 10px;
            transition: transform 0.3s ease;
        }

        .toggle-icon.rotated {
            transform: rotate(90deg);
        }

        .info-item {
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
        }

        .info-label {
            font-weight: bold;
            color: #333;
        }

        .info-value {
            margin-left: 10px;
        }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="sidebar">
                <ul>
                    <li><a href="/projects">é¡¹ç›®</a></li>
                    <li><a href="/daily">æ—¥å¸¸</a></li>
                    <li><a href="/tools">å·¥å…·</a></li>
                    <li><a href="https://file.ziyuan77.com" target="_blank">èµ„æºç«™</a></li>
                    <li><a href="https://blog.ziyuan77.com" target="_blank">åšå®¢</a></li>
                    <li><a href="/gomoku">äº”å­æ£‹ï¼Œå¯è”æœºå¯¹æˆ˜</a></li>
                    <li><a href="/cmd_commands">å¸¸ç”¨æ§åˆ¶å°å‘½ä»¤åŠå…¶å‚æ•°</a></li>
                </ul>
            </div>
            <div class="content">
                <h1>ziyuan77çš„ç½‘ç«™</h1>
                
                <h3>æ¬¢è¿æ¥åˆ°ziyuan77çš„ç½‘ç«™ï¼Œè¿™é‡Œæä¾›å„ç§æœ‰ç”¨çš„å·¥å…·å’Œèµ„æºã€‚</h3>
                
                <audio controls>
                    <source src="/static/audio/index.mp3" type="audio/mpeg">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚
                </audio>
                <audio controls>
                    <source src="/static/audio/1.flac" type="audio/mpeg">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚
                </audio>

                <div class="network-info">
                    <div class="network-info-header" onclick="toggleNetworkInfo()">
                        <span class="toggle-icon">â–¶</span>
                        <span>ç½‘ç»œä¿¡æ¯</span>
                    </div>
                    <div class="network-info-content">
                        <div class="info-item">
                            <span class="info-label">å½“å‰æ—¶é—´ (UTC+8):</span>
                            <span class="info-value" id="current-time">{{ current_time }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æ‚¨çš„IPåœ°å€:</span>
                            <span class="info-value" id="visitor-ip">{{ visitor_ip }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">åœ°ç†ä½ç½®:</span>
                            <span class="info-value" id="location">{{ location }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æµè§ˆå™¨:</span>
                            <span class="info-value" id="browser-info">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æµè§ˆå™¨è¯­è¨€:</span>
                            <span class="info-value" id="browser-language">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æ“ä½œç³»ç»Ÿ:</span>
                            <span class="info-value" id="os-info">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">è®¾å¤‡ç±»å‹:</span>
                            <span class="info-value" id="device-type">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">å±å¹•åˆ†è¾¨ç‡:</span>
                            <span class="info-value" id="screen-resolution">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">åƒç´ æ¯”:</span>
                            <span class="info-value" id="pixel-ratio">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">æœåŠ¡å™¨å»¶è¿Ÿï¼ˆåˆ°è¾¾ç½‘ç«™æœåŠ¡å™¨ï¼‰:</span>
                            <span class="info-value" id="server-latency">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ç½‘ç»œé€Ÿç‡ï¼ˆä¸ç½‘ç«™æœåŠ¡å™¨çš„è¿æ¥é€Ÿåº¦ï¼‰:</span>
                            <span class="info-value" id="network-speed">æ£€æµ‹ä¸­...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ç½‘ç»œç±»å‹:</span>
                            <span class="info-value" id="connection-type">æ£€æµ‹ä¸­...</span>
                        </div>
                    </div>
                </div>

                <!-- æ·»åŠ æœ€è¿‘æ›´æ–°å’Œçƒ­é—¨å·¥å…·åŒºåŸŸ -->


                    <div class="section popular-tools">
                        <h2>çƒ­é—¨å·¥å…·</h2>
                        <div class="tool-grid">
                            <a href="/password" class="tool-item">
                                <span class="tool-icon">ğŸ”‘</span>
                                <span class="tool-name">å¯†ç ç”Ÿæˆå™¨</span>
                            </a>
                            <a href="/ping" class="tool-item">
                                <span class="tool-icon">ğŸ“Ÿ</span>
                                <span class="tool-name">ç½‘ç»œè”é€šæ€§æµ‹è¯•</span>
                            </a>
                            <a href="/calculator" class="tool-item">
                                <span class="tool-icon">ğŸ§®</span>
                                <span class="tool-name">è®¡ç®—å™¨</span>
                            </a>
                            <a href="/qrcode" class="tool-item">
                                <span class="tool-icon">ğŸ“±</span>
                                <span class="tool-name">äºŒç»´ç ç”Ÿæˆ</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="footer-links">
                    <a href="/feedback">æä¾›åé¦ˆ</a>
                    <span class="divider">|</span>
                    <a href="/github">ç½‘ç«™æºç </a>
                    <span class="divider">|</span>
                    <a href="/update">ç½‘ç«™æ›´æ–°</a>
                </div>
            </footer>
        </div>
        <script src="/static/js/index.js"></script>
        <script>
        function updateTime() {
            const timeElement = document.getElementById('current-time');
            const options = {
                timeZone: 'Asia/Shanghai',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            
            setInterval(() => {
                const now = new Date();
                timeElement.textContent = now.toLocaleString('zh-CN', options);
            }, 1000);
        }

        function checkLatency() {
            const latencyElement = document.getElementById('server-latency');
            
            // å®šä¹‰æµ‹è¯•å»¶è¿Ÿçš„å‡½æ•°
            const testLatency = () => {
                const startTime = performance.now();
                
                fetch('/ping', {
                    method: 'GET',
                    cache: 'no-store'
                })
                .then(() => {
                    const latency = Math.round(performance.now() - startTime);
                    latencyElement.textContent = latency + ' ms';
                    
                    // æ ¹æ®å»¶è¿Ÿè®¾ç½®ä¸åŒçš„é¢œè‰²
                    if (latency < 200) {
                        latencyElement.style.color = '#32CD32'; // æµ…ç»¿è‰²
                    } else if (latency < 500) {
                        latencyElement.style.color = '#FFA500'; // æ©™è‰²
                    } else {
                        latencyElement.style.color = '#FF4500'; // çº¢æ©™è‰²
                    }
                })
                .catch(() => {
                    latencyElement.textContent = 'è¿æ¥å¤±è´¥';
                    latencyElement.style.color = '#FF4500';
                });
            };
            
            // é¡µé¢åŠ è½½æ—¶ç«‹å³æµ‹è¯•ä¸€æ¬¡
            testLatency();
            
            // ç„¶åæ¯10ç§’æµ‹è¯•ä¸€æ¬¡
            setInterval(testLatency, 10000);
        }

        function checkNetworkSpeed() {
            const speedElement = document.getElementById('network-speed');
            
            const testSpeed = () => {
                const startTime = performance.now();
                let downloadSize = 0;
                
                fetch('/static/test.bin', {
                    cache: 'no-store'
                })
                .then(response => {
                    downloadSize = parseInt(response.headers.get('content-length') || '0');
                    return response.blob();
                })
                .then(data => {
                    const endTime = performance.now();
                    const duration = (endTime - startTime) / 1000; // è½¬æ¢ä¸ºç§’
                    const bitsLoaded = downloadSize * 8;
                    const speedBps = (bitsLoaded / duration).toFixed(2);
                    const speedMbps = (speedBps / 1024 / 1024).toFixed(2);
                    
                    speedElement.textContent = speedMbps + ' Mbps';
                    
                    // æ ¹æ®é€Ÿåº¦è®¾ç½®ä¸åŒçš„é¢œè‰²
                    if (speedMbps > 5) {
                        speedElement.style.color = '#32CD32'; // æµ…ç»¿è‰²
                    } else if (speedMbps > 1) {
                        speedElement.style.color = '#FFA500'; // æ©™è‰²
                    } else {
                        speedElement.style.color = '#FF4500'; // çº¢æ©™è‰²
                    }
                })
                .catch(() => {
                    speedElement.textContent = 'æµ‹é€Ÿå¤±è´¥';
                    speedElement.style.color = '#FF4500';
                });
            };
            
            // é¡µé¢åŠ è½½æ—¶ç«‹å³æµ‹è¯•ä¸€æ¬¡
            testSpeed();
            
            // ç„¶åæ¯10ç§’æµ‹è¯•ä¸€æ¬¡
            setInterval(testSpeed, 10000);
        }

        function toggleNetworkInfo() {
            const content = document.querySelector('.network-info-content');
            const icon = document.querySelector('.toggle-icon');
            content.classList.toggle('show');
            icon.classList.toggle('rotated');
            
            // åªåœ¨å±•å¼€æ—¶æ‰å¼€å§‹æ£€æµ‹ç½‘ç»œçŠ¶æ€
            if (content.classList.contains('show')) {
                checkLatency();
                checkNetworkSpeed();
            }
        }

        function updateSystemInfo() {
            // è·å–æµè§ˆå™¨ä¿¡æ¯
            const browserInfo = document.getElementById('browser-info');
            const ua = navigator.userAgent;
            let browser = 'Unknown';
            if (ua.includes('Chrome')) browser = 'Chrome';
            else if (ua.includes('Firefox')) browser = 'Firefox';
            else if (ua.includes('Safari')) browser = 'Safari';
            else if (ua.includes('Edge')) browser = 'Edge';
            else if (ua.includes('MSIE') || ua.includes('Trident/')) browser = 'Internet Explorer';
            browserInfo.textContent = browser;

            // è·å–æµè§ˆå™¨è¯­è¨€
            const browserLanguage = document.getElementById('browser-language');
            browserLanguage.textContent = navigator.language || navigator.userLanguage || 'æœªçŸ¥';

            // è·å–è®¾å¤‡ç±»å‹
            const deviceType = document.getElementById('device-type');
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);
            const isTablet = /iPad|Android(?!.*Mobile)/i.test(ua);
            if (isTablet) {
                deviceType.textContent = 'å¹³æ¿è®¾å¤‡';
            } else if (isMobile) {
                deviceType.textContent = 'ç§»åŠ¨è®¾å¤‡';
            } else {
                deviceType.textContent = 'æ¡Œé¢è®¾å¤‡';
            }

            // è·å–è®¾å¤‡åƒç´ æ¯”
            const pixelRatio = document.getElementById('pixel-ratio');
            pixelRatio.textContent = window.devicePixelRatio.toFixed(2);

            // è·å–æ“ä½œç³»ç»Ÿä¿¡æ¯
            const osInfo = document.getElementById('os-info');
            let os = 'Unknown';
            if (ua.includes('Windows')) {
                if (ua.includes('Windows NT 10.0')) os = 'Windows 10/11';
                else if (ua.includes('Windows NT 6.3')) os = 'Windows 8.1';
                else if (ua.includes('Windows NT 6.2')) os = 'Windows 8';
                else if (ua.includes('Windows NT 6.1')) os = 'Windows 7';
                else os = 'Windows';
            } else if (ua.includes('Mac')) {
                if (ua.includes('iPhone')) os = 'iOS';
                else if (ua.includes('iPad')) os = 'iPadOS';
                else os = 'macOS';
            } else if (ua.includes('Android')) {
                const match = ua.match(/Android\s([0-9.]+)/);
                os = match ? `Android ${match[1]}` : 'Android';
            } else if (ua.includes('Linux')) os = 'Linux';
            osInfo.textContent = os;

            // è·å–å±å¹•åˆ†è¾¨ç‡
            const screenResolution = document.getElementById('screen-resolution');
            screenResolution.textContent = `${window.screen.width} x ${window.screen.height}`;

            // è·å–ç½‘ç»œè¿æ¥ç±»å‹
            const connectionType = document.getElementById('connection-type');
            const ip = document.getElementById('visitor-ip').textContent;
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºæœ¬åœ°åœ°å€
            if (ip === '127.0.0.1' || ip === 'localhost' || ip.startsWith('192.168.') || ip.startsWith('10.')) {
                connectionType.textContent = 'æœ¬åœ°ç½‘ç»œ';
            } else if ('connection' in navigator) {
                const conn = navigator.connection;
                connectionType.textContent = conn.effectiveType || conn.type || 'æœªçŸ¥';
            } else {
                connectionType.textContent = 'æµè§ˆå™¨ä¸æ”¯æŒæ­¤åŠŸèƒ½';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateTime();
            updateSystemInfo();
        });
        </script>
    </body>
</html>
